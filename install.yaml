name: mage2gen
description: DDEV add-on for running Mage2Gen with separate Frontend and Core forks.
version: 1.0.0

# 1. Copy these files from the Add-on Repo -> Project .ddev/ folder
project_files:
  - templates/config.mage2gen.yaml
  - templates/docker-compose.mage2gen.yaml
  - templates/scripts/link_core_library.sh
  - templates/frontend/Dockerfile
  - templates/settings/local.py

# 2. Post-install actions to organize the project
post_install_commands:
  # Setup main config
  - cp .ddev/templates/config.mage2gen.yaml .ddev/config.mage2gen.yaml

  # Setup Scripts
  - mkdir -p .ddev/scripts
  - cp .ddev/templates/scripts/link_core_library.sh .ddev/scripts/link_core_library.sh
  - chmod +x .ddev/scripts/link_core_library.sh

  # Setup Frontend Directory & Dockerfile
  - mkdir -p frontend
  - cp .ddev/templates/frontend/Dockerfile frontend/Dockerfile

  # Setup Settings
  - mkdir -p frontend/settings
  - cp .ddev/templates/settings/local.py frontend/settings/local.py

  # Cleanup the temporary templates folder in .ddev
  - rm -rf .ddev/templates
